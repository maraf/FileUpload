"use strict";function UploadFile(n,t,i,r){var f=new FormData,u;f.append("file",n,n.customName||n.name);u=new XMLHttpRequest;u.onreadystatechange=function(n){var r=n.target,f;r.readyState==XMLHttpRequest.DONE&&(r.status==200?(f=u.responseText,t(f)):i!=null&&i(u.status,u.statusText))};i!=null&&(u.onerror=function(n){i(500,n.message)});r!=null&&(u.upload.onprogress=function(n){r(n.loaded,n.total)});u.open("POST",Url);u.send(f)}function IsDraggableSupported(){var n=document.createElement("div");return"draggable"in n||"ondragstart"in n&&"ondrop"in n}function IsPasteSupport(){return"onpaste"in document}function Initialize(){function e(){for(var i,r="",t=0;t<n.length;t++)i=n[t],r+="<div data-file-index='"+t+"' class='up-file'><div class='up-file-name'>"+(i.customName||i.name)+"<\/div><div class='up-file-state'>Waiting<\/div><div class='clear'><\/div><div class='up-file-progress'><\/div><\/div>";f.innerHTML=r}function i(){if(t++,n.length>t){var s=null,e=null,r=f.querySelector("[data-file-index='"+t+"']");r!=null&&(r.classList.add("up-file-current"),s=r.querySelector(".up-file-progress"),e=r.querySelector(".up-file-state"));UploadFile(n[t],function(){r!=null&&(r.classList.remove("up-file-current"),r.classList.add("up-file-done"),e.innerHTML="Done");i()},function(){r!=null&&(r.classList.remove("up-file-current"),r.classList.add("up-file-error"),e.innerHTML="Failed");i()},function(n,t){var i=100/t*n;s.style.width=i+"%";e.innerHTML=Math.floor(i)+"%"})}else u.removeAttribute("disabled"),o.reset()}var o,r,u,f,n=[],t=-1;Container=document.getElementById("container");o=document.getElementById("form");r=document.getElementById("files");r.addEventListener("change",function(){u.setAttribute("disabled","disabled");n=r.files;t=-1;e();i()});u=document.getElementById("picker");u.addEventListener("click",function(n){r.click();n.preventDefault()});Container.addEventListener("drag",function(n){n.preventDefault()});Container.addEventListener("dragstart",function(n){n.preventDefault()});Container.addEventListener("dragend",function(n){n.preventDefault()});Container.addEventListener("dragover",function(n){n.preventDefault()});Container.addEventListener("dragenter",function(n){n.preventDefault()});Container.addEventListener("dragleave",function(n){n.preventDefault()});Container.addEventListener("drop",function(r){n=r.dataTransfer.files;t=-1;e();i();r.preventDefault()});f=document.querySelector(".up-status");IsDraggableSupported()&&document.body.classList.add("up-draggable");IsPasteSupport()&&(document.addEventListener("paste",function(r){var f,s,o,h,u;for(n=r.clipboardData.files,t=-1,f=0;f<n.length;f++)s=n[f],o=s.name.split("."),o[0]=="image"&&(h="file_"+ +new Date,u=prompt("Name the file (without extension):",h),(u==null||u.trim()=="")&&(u=h),o[0]=u,s.customName=o.join("."));e();i();r.preventDefault()}),Container.querySelector(".up-clipboard").style.display="block");Container.style.display="block"}